// Literal 0.3.0 (Built 2021-07-30 02:16)


function y(t){return t}function l(t,e){return function(){let r=t.apply(this,arguments),o=e[r]||e.default;if(!o)throw new Error('overload() no handler for "'+r+'"');return o.apply(this,arguments)}}function T(t){return typeof t}var Gt=!1;function B(t){var e=new Map;return function(r){if(Gt&&r===void 0)throw new Error("Fn: cache() called with undefined.");if(Gt&&arguments.length>1)throw new Error("Fn: cache() called with "+arguments.length+" arguments. Accepts exactly 1.");if(e.has(r))return e.get(r);var o=t(r);return e.set(r,o),o}}var Be=!1,Re=Array.prototype;function Se(t,e){return typeof t=="function"?t.apply(null,e):t}function Q(t,e,n){n=n||t.length;var r=n===1?e?t:B(t):B(function(o){return Q(function(){var i=[o];return i.push.apply(i,arguments),t.apply(null,i)},e,n-1)});return function o(i){return arguments.length===0?o:arguments.length===1?r(i):arguments.length>=n?t.apply(null,arguments):Se(r(i),Re.slice.call(arguments,1))}}if(Be){let t=Q,e=function(){var r=function(){};try{Object.defineProperty(r,"length",{value:2})}catch(o){return!1}return r.length===2}(),n=function(o,i,s,c){return c.toString=function(){return/function\s*[\w\d]*\s*\([,\w\d\s]*\)/.exec(s.toString())+" { ["+o+"] }"},e&&Object.defineProperty(c,"length",{value:i}),c};Q=function(o,i,s){return s=s||o.length,n("curried",s,o,t(o,i,s))}}var a=Q;function d(){}var Pe=l(y,{is:d,tag:d,html:function(t,e,n){e.innerHTML=n},text:function(t,e,n){e.textContent=n},children:function(t,e,n){e.innerHTML="",n.forEach(r=>{e.appendChild(r)})},points:R,cx:R,cy:R,r:R,preserveAspectRatio:R,viewBox:R,default:function(t,e,n){t in e?e[t]=n:e.setAttribute(t,n)}});function R(t,e,n){e.setAttribute(t,n)}function Ge(t,e){for(var n=Object.keys(e),r=n.length;r--;)Pe(n[r],t,e[n[r]]);return t}var F=a(Ge,!0);var Me="http://www.w3.org/2000/svg",Mt=document.createElement("div");function Ue(t,e){var n=document.createElement(t);return e&&(n.innerHTML=e),n}function b(t,e){var n=document.createElementNS(Me,t);return e&&(n.innerHTML=e),n}var S=l(y,{comment:function(t,e){return document.createComment(e||"")},fragment:function(t,e){var n=document.createDocumentFragment();if(e){Mt.innerHTML=e;let r=Mt.childNodes;for(;r[0];)n.appendChild(r[0])}return n},text:function(t,e){return document.createTextNode(e||"")},circle:b,ellipse:b,g:b,glyph:b,image:b,line:b,rect:b,use:b,path:b,pattern:b,polygon:b,polyline:b,svg:b,default:Ue});function ke(){return Array.prototype.map.call(arguments,T).join(" ")}function Ut(t){if(typeof t!="string")throw new Error("create(object, content) object must have string property .tag or .tagName")}var kt=l(ke,{string:S,"string undefined":S,"string string":S,"string object":function(t,e){return F(S(t,""),e)},"object string":function(t,e){let n=t.tag||t.tagName;return Ut(n),F(S(n,e),t)},"object object":function(t,e){let n=t.tag||t.tagName;return Ut(n),F(F(S(n,""),t),e)},default:function(){throw new Error('create(tag, content) does not accept argument types "'+Array.prototype.map.call(arguments,T).join(" ")+'"')}});function dt(t,e,n){let r;typeof n!="string"&&n.input!==void 0&&n.index!==void 0&&(r=n,n=r.input.slice(n.index+n[0].length+(n.consumed||0)));let o=t.exec(n);if(!o)return;let i=e(o);return r&&(r.consumed=(r.consumed||0)+o.index+o[0].length+(o.consumed||0)),i}var co=a(dt,!0);function _e(t,e,n){throw n.input!==void 0&&n.index!==void 0&&(n=n.input),new Error('Cannot parse string "'+n+'"')}function qe(t,e,n){let r=-1;for(;++r<n.length;)e=n[r]!==void 0&&t[r]?t[r](e,n):e;return t.done?t.done(e,n):t.close?t.close(e,n):e}function He(t,e,n,r){let o=dt(t,i=>qe(e,n,i),r);return o===void 0?e.catch?e.catch(n,r):_e(t,e,r):o}var _t=a(He,!0);var Ve=window.DEBUG&&(window.DEBUG===!0||window.DEBUG.includes("element")),p=Symbol("internals"),A=Symbol("shadow"),qt=Object.defineProperties,Fe={a:HTMLAnchorElement,dl:HTMLDListElement,p:HTMLParagraphElement,br:HTMLBRElement,fieldset:HTMLFieldSetElement,hr:HTMLHRElement,img:HTMLImageElement,li:HTMLLIElement,ol:HTMLOListElement,optgroup:HTMLOptGroupElement,q:HTMLQuoteElement,textarea:HTMLTextAreaElement,td:HTMLTableCellElement,th:HTMLTableCellElement,tr:HTMLTableRowElement,tbody:HTMLTableSectionElement,thead:HTMLTableSectionElement,tfoot:HTMLTableSectionElement,ul:HTMLUListElement},Ie={type:{value:"text"},name:{set:function(t){return this.setAttribute("name",t)},get:function(){return this.getAttribute("name")||""}},form:{get:function(){return this[p].form}},labels:{get:function(){return this[p].labels}},validity:{get:function(){return this[p].validity}},validationMessage:{get:function(){return this[p].validationMessage}},willValidate:{get:function(){return this[p].willValidate}},checkValidity:{value:function(){return this[p].checkValidity()}},reportValidity:{value:function(){return this[p].reportValidity()}}},We={},Ht={once:!0},$e=0,Vt=!1;function Xe(t){return Fe[t]||window["HTML"+t[0].toUpperCase()+t.slice(1)+"Element"]||(()=>{throw new Error('Constructor not found for tag "'+t+'"')})()}var Je=_t(/^\s*<?([a-z][\w]*-[\w]+)>?\s*$|^\s*<?([a-z][\w]*)\s+is=["']?([a-z][\w]*-[\w]+)["']?>?\s*$/,{1:(t,e)=>({name:e[1]}),2:(t,e)=>({name:e[3],tag:e[2]}),catch:function(t,e){throw new Error(`Element name must be of the form 'element-name' or 'tag is="element-name"' (`+e+")")}},null);function ze(t,e){if(t.hasOwnProperty(e)){let n=t[e];delete t[e],t[e]=n}return t}function Qe(t,e){t._initialLoad=!0;let n=t.attachShadow({mode:e.mode||"closed",delegatesFocus:e.focusable||!1});return t[A]=n,n}function Ye(t){if(t.attachInternals)return t.attachInternals();let e=kt("input",{type:"hidden",name:t.name});return e.setFormValue=function(n){this.value=n},e}function Ze(t){t._initialAttributes={},t._n=0}function Ke(t,e,n){let r=t._initialAttributes;for(;t._n<e.length&&r[e[t._n]]!==void 0;)n[e[t._n]].call(t,r[e[t._n]]),++t._n}function Ft(t,e,n){if(!t._initialAttributes)return;let r=t._initialAttributes;for(;t._n<e.length;)r[e[t._n]]!==void 0&&n[e[t._n]]&&n[e[t._n]].call(t,r[e[t._n]]),++t._n;delete t._initialAttributes,delete t._n}function tn(t){return!!t.attribute}function en(t){return t.set||t.get||t.hasOwnProperty("value")}function It(t,e){return tn(e[1])&&(t.attributes[e[0]]=e[1].attribute),en(e[1])&&(t.properties[e[0]]=e[1]),t}function I(t,e,n){let{name:r,tag:o}=Je(t),i=typeof o=="string"?Xe(o):HTMLElement,{attributes:s,properties:c}=n?Object.entries(n).reduce(It,{attributes:{},properties:{}}):e.properties?Object.entries(e.properties).reduce(It,{attributes:{},properties:{}}):We;function h(){let u=Reflect.construct(i,arguments,h),g=e.construct&&e.construct.length>$e?Qe(u,e):void 0;return h.formAssociated&&(u[p]=Ye(u)),o&&(Vt=!0),e.construct&&e.construct.call(u,g,u[p]),s&&(Ze(u),Promise.resolve(1).then(function(){Ft(u,h.observedAttributes,s)})),c&&Object.keys(c).reduce(ze,u),u}let j=h.prototype=Object.create(i.prototype,c);return c&&c.value&&(h.formAssociated=!0,qt(j,Ie),(e.enable||e.disable)&&(j.formDisabledCallback=function(u){return u?e.disable&&e.disable.call(this,this[A],this[p]):e.enable&&e.enable.call(this,this[A],this[p])}),e.reset&&(j.formResetCallback=function(){return e.reset.call(this,this[A],this[p])}),e.restore&&(j.formStateRestoreCallback=function(){return e.restore.call(this,this[A],this[p])})),s&&(h.observedAttributes=Object.keys(s),j.attributeChangedCallback=function(u,g,v){if(!this._initialAttributes)return s[u].call(this,v);this._initialAttributes[u]=v,Ke(this,h.observedAttributes,s)}),j.connectedCallback=function(){let u=this,g=u[A],v=u[p];if(u._initialAttributes&&Ft(u,h.observedAttributes,s),u[p]&&!u.attachInternals&&u.appendChild(u[p]),u._initialLoad){let V=g.querySelectorAll('link[rel="stylesheet"]');if(V.length){let Ce=0,lt=V.length,Pt=function(Vr){++Ce>=V.length&&(delete u._initialLoad,e.load&&e.load.call(u,g))};for(;lt--;)V[lt].addEventListener("load",Pt,Ht),V[lt].addEventListener("error",function(ft){console.log("Failed to load stylesheet",ft.target.href),Pt(ft)},Ht);e.connect&&e.connect.call(this,g,v)}else e.connect&&e.connect.call(this,g,v),e.load&&e.load.call(this,g,v)}else e.connect&&e.connect.call(this,g,v)},e.disconnect&&(j.disconnectedCallback=function(){return e.disconnect.call(this,this[A],this[p])}),console.log("%cElement","color: #3a8ab0; font-weight: 600;","<"+(o?o+" is="+r+"":r)+">"),window.customElements.define(r,h,o&&{extends:o}),o&&!Vt&&(Ve&&console.warn(`Browser does not support customised built-in elements.
Attempting to partially polyfill instances of <`+o+' is="'+r+'"> found in the DOM.'),document.querySelectorAll('[is="'+r+'"]').forEach(u=>{qt(u,c),e.construct&&e.construct.apply(u);let g;for(g in s){let v=u.attributes[g];v&&s[g].call(u,v.value)}e.connect&&e.connect.apply(u)})),h}var Wt=/\.?([\w-]+)/g;function nn(t,e,n){var r=t.exec(e);if(!r)throw new Error('getPath(path, object): invalid path "'+e+'" at index '+t.lastIndex);return $t(t,e,n[r[1]])}function $t(t,e,n){return t.lastIndex===e.length?n:n?nn(t,e,n):void 0}function rn(t,e){return Wt.lastIndex=0,$t(Wt,t,e)}var Y=a(rn,!0);var on={done:!0},sn={next:()=>on},D=Object.freeze({shift:d,push:d,join:function(){return""},forEach:d,map:function(){return this},filter:function(){return this},indexOf:function(){return-1},start:d,stop:d,length:0,[Symbol.iterator]:()=>sn});function pt(t){var e=t.id;if(!e){do e=Math.ceil(Math.random()*1e5);while(document.getElementById(e));t.id=e}return e}function L(t){return t.nodeType===3}var un={1:"element",3:"text",8:"comment",9:"document",10:"doctype",11:"fragment"};function Xt(t){return un[t.nodeType]}function cn(t,e,n){let r=t(e),o=t(n);return o===r?0:r>o?1:-1}var Jt=a(cn,!0);function zt(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object")return!1;let n=Object.keys(t),r=Object.keys(e),o=n.length;for(;o--;){if(t[n[o]]===void 0){if(e[n[o]]!==void 0)return!1}else if(!e.hasOwnProperty(n[o])||!zt(t[n[o]],e[n[o]]))return!1;let i=r.indexOf(n[o]);i>-1&&r.splice(i,1)}for(o=r.length;o--;)if(e[r[o]]===void 0){if(t[r[o]]!==void 0)return!1}else return!1;return!0}var Qt=a(zt,!0);function an(t,e){let n;for(n in t)if(t[n]!==e[n])return!1;return!0}var Yt=a(an,!0);function mt(t){if(t=typeof t=="number"?t+"":t.trim(),typeof t=="string")return t.toLowerCase().replace(/^[\W_]+/,"").replace(/[\W_]+$/,"").replace(/[\W_]+/g,"-")}function ht(t){if(typeof t.length=="number")return t[t.length-1]}var Ro=window.DEBUG===!0,ln=Object.assign,fn=Object.defineProperties,dn=Object.isExtensible,x=Symbol("oberver"),W={observables:0,observes:0};function Z(t,e){let n=t.indexOf(e);return n>-1&&t.splice(n,1),t}function E(t){return t&&t[x]&&t[x].target||t}function gt(t,e){let n=e[x],r=n.observables||(n.observables={});return r[t]||(r[t]=[])}function bt(t,e,n){if(!!t){t=t.slice(0);for(var r=-1;t[++r];)t[r].fn?t[r].fn(e,n):t[r](e,n)}}function pn(t){return t&&dn(t)&&!Node.prototype.isPrototypeOf(t)&&(typeof BaseAudioContext=="undefined"||!BaseAudioContext.prototype.isPrototypeOf(t))&&!(t instanceof Date)&&!(t instanceof RegExp)&&!(t instanceof Map)&&!(t instanceof WeakMap)&&!(t instanceof Set)&&!(window.WeakSet&&t instanceof WeakSet)&&!ArrayBuffer.isView(t)}var Zt={[x]:{}};function Kt(){this.observables={},this.gets=[]}ln(Kt.prototype,{get:function(e,n,r){if(typeof n=="symbol"||n==="__proto__")return e[n];let o=Object.getOwnPropertyDescriptor(e,n);o&&(o.writable||o.set)&&bt(this.gets,n);let s=P(e[n]);if(!s)return e[n];for(var c=-1;this.gets[++c];)this.gets[c].listen(n);return s},set:function(e,n,r,o){if(typeof n=="symbol"||n==="__proto__")return e[n]=r,!0;if(e[n]===r)return!0;for(var i=-1;this.gets[++i];)this.gets[i].unlisten(n);e[n]=E(r),r=e[n];let s=this.observables[n];return s&&bt(s,r),!0},deleteProperty:function(t,e){if(typeof e=="symbol"||e==="__proto__")return delete t[e],!0;if(!t.hasOwnProperty(e))return!0;delete t[e];let n=this.observables[e];return n&&bt(n,t[e]),!0}});function mn(t){let e=new Kt,n=new Proxy(t,e);return e.observer=n,e.target=t,Zt[x].value=e,fn(t,Zt),n}function P(t){return t?t[x]&&t[x].observer||(pn(t)?mn(t):void 0):void 0}var K=window.DEBUG===!0,te=Object.assign,wt=/(^\.?|\.)\s*([\w-]*)\s*/g;function yt(t,e,n,r){if(!t.length)throw new Error("Path is empty!");wt.lastIndex=e;let o=wt.exec(t);if(!o)throw new Error("Cant parse path "+this.path+" at index "+this.index);if(!o[2]){console.log('r[1] must be "." (',o[1],t,") Todo: observe all mutations");return}this.target=n,this.path=t,this.index=wt.lastIndex,this.key=o[2],this.output=r,this.index>=this.path.length&&(this.fn=this.output),this.listen(),this.fn(this.target[this.key]),K&&++W.observes}te(yt.prototype,{fn:function(t){let e=typeof t;if(!t||e!=="object"&&e!=="function"){this.child&&(this.child.stop(),this.child=void 0),this.output(void 0);return}this.child?(this.child.unlisten(),this.child.target=t,this.child.listen()):this.child=new yt(this.path,this.index,t,this.output),this.child.fn(t[this.child.key])},listen:function(){if(!P(this.target)){console.log("CANNOT LISTEN TO UNOBSERVABLE",this.target);return}let e=gt(this.key,this.target);if(e.includes(this))throw new Error("observe.listen this is already bound");e.push(this)},unlisten:function(){let t=gt(this.key,this.target);Z(t,this)},stop:function(){this.unlisten(),this.child&&this.child.stop(),this.child=void 0,K&&--W.observes}});function ee(t,e,n){return new yt(t.path,0,t.target,typeof e=="function"?r=>{r!==n&&(n=r,e(r))}:r=>{r!==n&&(n=r,e.push(r))})}function G(t,e,n){this.path=t,this.target=e,this.initial=n,K&&++W.observables}te(G.prototype,{each:function(t){return this.child=ee(this,t,this.initial),this},pipe:function(t){return ee(this,t,this.initial),t},stop:function(){return this.child.stop(),K&&--W.observables,this}});function M(t,e,n){return new G(t,E(e),n)}var hn=Object.assign;function gn(t,e,n,r){t.length||n.then(r),t.includes(e)||t.push(e)}function bn(t,e,n){let r=Promise.resolve(t);function o(){n(t),t.length=0}let i=t.map(s=>new G(s,e));return t.length=0,i.forEach(s=>s.each(c=>gn(t,s.path,r,o))),i}function wn(t){t.stop()}function yn(t,e){this.paths=t,this.target=e}hn(yn.prototype,{each:function(t){return this.children=bn(this.paths,this.target,t),this},stop:function(){return this.children.forEach(wn),this}});var xn=/^\s*([+-]?\d*\.?\d+)([^\s\d]*)\s*$/;function jn(t,e){if(typeof e=="number")return e;var n=xn.exec(e);if(!n||!t[n[2]||""]){if(!t.catch)throw new Error('Cannot parse value "'+e+'" with provided units '+Object.keys(t).join(", "));return n?t.catch(parseFloat(n[1]),n[2]):t.catch(parseFloat(e))}return t[n[2]||""](parseFloat(n[1]))}var ne=a(jn);var xt=l(T,{number:y,string:ne({px:t=>t,em:t=>16*t,rem:t=>16*t,catch:(t,e)=>{if(Number.isNaN(t))throw new Error("Invalid CSS length NaN");if(e)throw new Error("Invalid CSS length value: "+t+" unit: "+e);return t}})}),re=xt;function oe(t){return xt(t)/16}function ie(t){return xt(t)/16}var jt={assign:Object.assign,by:Jt,define:Object.defineProperties,entries:Object.entries,em:oe,equals:Qt,get:Y,keys:Object.keys,last:ht,matches:Yt,observe:M,overload:l,px:re,rem:ie,slugify:mt,values:Object.values,render:function(){return Promise.all(arguments)}},w=jt;function vn(t,e){if(jt[t])throw new Error('Literal: function "'+t+'" already registered');return jt[t]=e,e}function En(t,e){return e[t]}var vt=a(En,!0);function Tn(t){let e=t[0];return/^\w/.test(e)}function tt(t={},e,n,r){let o=Object.entries(t).filter(Tn),i=o.map(vt(0)),s=o.map(vt(1));return r?new Function(...i,"return async ("+e+") => {"+(n||"")+"}").apply(r,s):new Function(...i,"return async function("+e+"){"+(n||"")+"}").apply(null,s)}var On=window.DEBUG===!0||window.DEBUG&&window.DEBUG.includes("literal");var $="  ",X={};function Nn(t){let e=t[0];return/^\w/.test(e)}function An(t){return t.split(/\s*[,\s]\s*/).filter(Nn).sort().join(", ")}function m(t,e,n,r,o="data",i,s){if(typeof n!="string")throw new Error("Template is not a string");let c=r||n;if(X[c])return X[c];let h=e&&An(e),j=`
`+(r?$+"// Template #"+r+`
`:"")+(h?$+"const { "+h+" } = "+o+`;
`:"")+$+"return render`"+n+"`;\n";if(On)try{let u=tt(t,"data = {}","try {"+j+"} catch(e) {"+$+'e.message += " in template #" + this.template + (this.element && this.element.tagName ? ", <" + this.element.tagName.toLowerCase() + (this.name ? " " + this.name + "=\\"...\\">" : ">") : "");'+$+"throw e;}");return X[c]=u}catch(u){throw u.message+=" in template #"+i.template+(s&&s.tagName?", <"+s.tagName.toLowerCase()+(i.name?" "+i.name+'="'+n+'">':">"):""),u}return X[c]=tt(t,"data = {}",j)}var Dn=/\s*(\([\w,\s]*\))/,Ln=/function(?:\s+\w+)?\s*(\([\w,\s]*\))/,U=l(T,{boolean:t=>t+"",function:t=>t.prototype?(t.name||"function")+(Ln.exec(t.toString())||[])[1]:(Dn.exec(t.toString())||[])[1]+" ⇒ ()",number:t=>Number.isNaN(t)?"":Number.isFinite(t)?t+"":t<0?"-∞":"∞",string:y,symbol:t=>t.toString(),undefined:t=>"",object:l(t=>t&&t.constructor.name,{RegExp:t=>t.source,null:()=>"",default:t=>JSON.stringify(t,null,2)}),default:JSON.stringify});var Cn=Object.assign,Bn=t=>t&&typeof t=="object"&&t.then,J=t=>t.reduce((e,n)=>n===""||n===void 0?e:e+n);function Rn(t,e,n){return t&&typeof t=="object"?t.then?t.then(r=>e===""?r:e+r):t.find?t.find(Bn)?Promise.all(t).then(r=>e===""?J(r.map(n)):e+J(r.map(n))):e===""?J(t.map(n)):e+J(t.map(n)):e===""?n(t):e+n(t):e===""?n(t):e+n(t)}function Sn(t){let e=t[0];return J(e.map((n,r)=>r<=t.length?Rn(t[r+1],n,U):n===""?void 0:n))}var Pn=0;function f(t,e,n){this.element=n||t,this.node=t,this.path=e.path,this.id=++Pn,this.count=0,this.template=e.template}Cn(f.prototype,{render:function(){return++this.count,this.literal.apply(this,arguments).then(this.resolve).then(this.update)},resolve:Sn});var Gn=Object.assign;function Mn(t,e,n){return n===t.getAttribute(e)?0:(t.setAttribute(e,n),1)}function et(t,e){f.apply(this,arguments),this.literal=e.literal||m(w,e.consts,e.source,null,"arguments[1]",e,this.element),this.name=e.name,this.update=n=>Mn(t,this.name,n)}Gn(et.prototype,f.prototype);var Un=Object.assign;function kn(t,e,n){if(e in t){if(!!n===t[e])return 0;t[e]=n}else n?t.setAttribute(e,e):t.removeAttribute(e);return 1}function nt(t,e){f.apply(this,arguments),this.literal=e.literal||m(w,e.consts,e.source,null,"arguments[1]",e,this.element),this.name=e.name,this.update=n=>kn(t,this.name,n)}Un(nt.prototype,f.prototype);function Et(t){return!!t||t!=null&&!Number.isNaN(t)}var Tt=Object.assign,_n=window.CustomEvent,Ot={bubbles:!0,cancelable:!0};function Nt(t,e){let n;typeof t=="object"&&(n=Tt({},Ot,t),t=n.type,delete n.type),e&&e.detail&&(n?n.detail=e.detail:n=Tt({detail:e.detail},Ot));var r=new _n(t,n||Ot);return e&&(delete e.detail,Tt(r,e)),r}function qn(t,e){let n;typeof t=="object"&&(n=t,t=n.type,delete n.type);var r=Nt(t,n);return e.dispatchEvent(r),e}var rt=a(qn,!0);var k={changeEvent:"dom-update"};var Hn=Object.assign,Vn=/^\s*$/;function Fn(t){return!Vn.test(t)}function In(t,e,n){let r=typeof e=="boolean"?e:n?e+""===t.value:!!e;return r===t.checked?0:(t.checked=r,k.changeEvent&&rt(k.changeEvent,t),1)}function ot(t,e){f.apply(this,arguments),this.name="checked",this.literal=e.literal||m(w,e.consts,e.source,null,"arguments[1]",e,this.element);let n=Et(t.getAttribute("value"));this.update=r=>In(t,r,n)}Hn(ot.prototype,f.prototype,{resolve:function(e){if(e.length!==2||e[0].find(Fn))throw new Error("A checked attribute may contain only one ${ tag }, optionally surrounded by white space");return e[1]}});function Wn(t,e){if(e.slice)return e.slice(t);if(e.rest)return e.rest(t);for(var n=[],r=e.length-t;r--;)n[r]=e[r+t];return n}var se=a(Wn,!0);function it(t){return function(n){var r=t[n]||t.default;return r&&r.apply(this,se(1,arguments))}}var _=Object.assign,q={headers:function(t){return{}},body:y,onresponse:function(t){if(t.redirected){window.location=t.url;return}return t}},$n=it({"application/x-www-form-urlencoded":function(t){return _(t,{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"})},"application/json":function(t){return _(t,{"Content-Type":"application/json; charset=utf-8","X-Requested-With":"XMLHttpRequest"})},"multipart/form-data":function(t){return _(t,{"Content-Type":"multipart/form-data","X-Requested-With":"XMLHttpRequest"})},"audio/wav":function(t){return _(t,{"Content-Type":"audio/wav","X-Requested-With":"XMLHttpRequest"})},default:function(t){return _(t,{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"})}}),zn=it({"application/json":function(t){return t.get?Xn(t):JSON.stringify(t)},"application/x-www-form-urlencoded":function(t){return t.get?ue(t):ce(t)},"multipart/form-data":function(t){return t.get?t:Jn(t)}});function Xn(t){return JSON.stringify(Array.from(t.entries()).reduce(function(e,n){return e[n[0]]=n[1],e},{}))}function ue(t){return new URLSearchParams(t).toString()}function ce(t){return Object.keys(t).reduce((e,n)=>(e.append(n,t[n]),e),new URLSearchParams)}function Jn(t){throw new Error("TODO: dataToFormData(data)")}function Qn(t,e){return e instanceof FormData?t+"?"+ue(e):t+"?"+ce(e)}function Yn(t,e,n,r){let o=typeof n=="string"?n:n&&n["Content-Type"]||"application/json",i=$n(o,_(q.headers&&e?q.headers(e):{},typeof n=="string"?D:n)),s={method:t,headers:i,credentials:"same-origin",signal:r&&r.signal};return t!=="GET"&&(s.body=zn(o,q.body?q.body(e):e)),s}var tr={"text/html":Kn,"application/json":Zn,"multipart/form-data":ae,"application/x-www-form-urlencoded":ae,audio:At,"audio/wav":At,"audio/m4a":At};function At(t){return t.blob()}function Zn(t){return t.json().catch(e=>{throw new Error("Cannot parse JSON "+t.url+". "+e.message+"")})}function ae(t){return t.formData()}function Kn(t){return t.text()}function er(t){if(q.onresponse&&(t=q.onresponse(t)),!t.ok)throw new Error(t.statusText+"");let e=t.headers.get("Content-Type").replace(/\;.*$/,"");return tr[e](t)}function le(t="GET",e,n,r="application/json"){(e.startsWith("application/")||e.startsWith("multipart/")||e.startsWith("text/")||e.startsWith("audio/"))&&(console.trace("request(method, url, data, contenttype) parameter order has changed. You passed (method, contenttype, url, data)."),e=arguments[1],n=arguments[2],r=arguments[3]),t=t.toUpperCase(),t==="GET"&&n&&(e=Qn(e,n));let o=Yn(t,n,r,arguments[4]);return fetch(e,o).then(er)}function fe(t){return le("GET",t)}var es=window.DEBUG===!0||window.DEBUG&&window.DEBUG.includes("literal"),nr=/\.([\w-]+)(?:#|\?|$)/,rr=/#(\w+)(?:\(([^\)]*)\))?$/,or=["","default",""],C=l(t=>nr.exec(t)[1],{js:t=>{let[e,n,r]=rr.exec(t)||or,o=t[0]==="."?new URL(t,window.location):t;return r?import(o).then(i=>{if(typeof i[n]!="function")throw new Error("Export "+o+" is not a function");return new i[n](...JSON.parse("["+r.replace(/'/g,'"')+"]"))}):import(o).then(i=>i[n])},json:B(t=>fe(t))});function ir(t,e){if(!/^#/.test(t))throw new Error('Template: Only #fragment identifiers currently supported as include() urls ("'+t+'")');let n=new O(t.slice(1));return typeof e=="string"?C(e).then(r=>n.render(r)):e.then?e.then(r=>n.render(r)):n.render(e||{}),n}var de=a(ir);var hs=window.DEBUG===!0||window.DEBUG&&window.DEBUG.includes("literal"),pe=Object.assign,sr=pe({},w,{include:de,request:C});function ur(t,e,n){let r=n.length,o=-1;for(;++o<r;)t=me(t,e,n[o]);return t}function me(t,e,n){if(n&&typeof n=="object"){if(typeof n.length=="number")return ur(t,e,n);if(n instanceof Node||n instanceof O)return t&&e.push(t),e.push(n),""}return t+U(n)}function he(t,e){return t.after?t.after(e):t.last.after(e),1}function ge(t,e){return e.stop&&e.stop(),t+=e.remove()||1,t}function Dt(t,e){return t.nodeValue!==e?(t.nodeValue=e,1):0}function cr(t,e,n){let r=0,o;typeof n[0]=="string"?(r+=Dt(t,n[0]),o=0):(r+=Dt(t,""),o=-1);let i=0,s;for(;s=n[++o];){if(typeof s=="string"){for(;i<e.length&&!L(e[i]);)r=e.splice(i,1).reduce(ge,r);if(e[i])r+=Dt(e[i],s);else{let c=document.createTextNode(s);r+=he(e[i-1],c),e.push(c)}}else r+=he(e[i-1]||t,s.fragment),e.splice(i,0,s);++i}return r=e.splice(i).reduce(ge,r),r}function z(t,e,n){f.apply(this,arguments);let r=this.children=[];this.literal=e.literal||m(sr,e.consts,e.source,null,"arguments[1]",e,n),this.update=o=>cr(t,r,o)}pe(z.prototype,f.prototype,{resolve:function(t){let e=t[0],n=[],r=-1,o="";for(;e[++r]!==void 0;)o=me(o+e[r],n,t[r+1]);return o&&n.push(o),n}});var ar=Object.assign,lr=[],fr=l((t,e)=>e,{class:t=>t.classList});function dr(t){return t&&typeof t=="object"&&t.length!==void 0?t.join(" "):U(t)}function pr(t){let[e]=t;for(var n="",r=-1,o;e[++r]!==void 0;)e[r]&&(n+=" "+e[r]),o=t[r+1],o!==void 0&&o!==""&&(n+=" "+dr(o));return n}function mr(t,e,n,r){let o=e.length;for(;o--;)t.indexOf(e[o])!==-1&&e.splice(o,1);return e.length&&(t.remove.apply(t,e),++r),t.add.apply(t,n),++r}function st(t,e){f.apply(this,arguments);let n=fr(t,e.name),r=lr;this.literal=e.literal||m(w,e.consts,e.source,null,"arguments[1]",e,t),this.name=e.name,this.update=o=>{let i=o.trim().split(/\s+/),s=mr(n,r,i,0);return r=i,s},t.setAttribute(this.name,"")}ar(st.prototype,f.prototype,{resolve:pr});var be=Object.assign,we=/^\s*$/,hr={number:"number",range:"number"};function ye(t,e){return t===void 0?e:t+e}function gr(t){let e=t[0],n=we.test(e[0])?void 0:e[0],r=0;for(;e[++r]!==void 0;)n=ye(n,t[r]),we.test(e[r])||(n=ye(n,e[r]));return n}function br(t,e,n){if(n===null)throw new Error("VALUE");return e in t?t[e]=n:t.setAttribute(e,n),1}function xe(t,e){if(document.activeElement===t)return 0;let n=hr[t.type];if(e=n===void 0||typeof e===n?e:null,e===t.value||e+""===t.value)return 0;let r=br(t,"value",e);return k.changeEvent&&rt(k.changeEvent,t),r}function ut(t,e){f.apply(this,arguments),this.name="value",this.literal=e.literal||m(w,e.consts,e.source,null,"arguments[1]",e,t),this.update=n=>xe(t,n)}be(ut.prototype,f.prototype,{resolve:gr});function Lt(t,e){f.apply(this,arguments),this.name="value",this.literal=e.literal||m(w,e.consts,e.source,null,"arguments[1]",e,t),this.update=n=>xe(t,n)}be(Lt.prototype,f.prototype);var je=document.createElement("textarea");function ct(t){return je.innerHTML=t,je.value}var qs=window.DEBUG===!0||window.DEBUG&&window.DEBUG.includes("literal"),wr=Array.prototype,N=/\$\{/;function ve(t,e,n,r){let o=r.value;if(!o||!N.test(o))return;let i=r.localName;e.source=o,e.name=i,t.push(new et(n,e))}function Ct(t,e,n,r){let o=r.value;if(!o||!N.test(o))return;let i=r.localName;e.source=o,e.name=i,t.push(new nt(n,e))}function yr(t,e,n,r){let o=r.value;if(!o||!N.test(o))return;let i=r.localName;e.source=o,e.name=i,t.push(new st(n,e))}function xr(t,e,n,r){let o=r.value;!o||!N.test(o)||(e.source=o,e.name="value",t.push(new ut(n,e)))}function Bt(t,e,n,r){let o=r.value;!o||!N.test(o)||(e.source=o,e.name="value",t.push(new Lt(n,e)))}function jr(t,e,n,r){let o=r.value;!o||!N.test(o)||(e.source=o,e.name="checked",t.push(new ot(n,e)))}var vr=l((t,e,n,r)=>r.localName,{checked:jr,class:yr,datetime:function(e,n,r,o){console.log("Todo: compile datetime")},disabled:Ct,hidden:Ct,"inner-content":function(t,e,n,r){let o=r.value;!o||!N.test(o)||(n.removeAttribute(r.localName),e.source=ct(o),e.name="innerHTML",t.push(new z(n,e)))},required:Ct,value:l((t,e,n,r)=>""+n.type,{text:Bt,search:Bt,"select-one":Bt,default:xr,undefined:ve}),default:ve});function Er(t,e,n){let r=wr.slice.apply(n.attributes);for(var o=-1,i;i=r[++o];)vr(t,e,n,i)}function Rt(t,e,n){let r=n.childNodes;if(r){let o=e.path,i=-1;for(;r[++i];)e.path=o?o+"."+i:""+i,Ee(t,e,r[i],n);e.path=o}return t}var Tr=l((t,e,n)=>n.tagName.toLowerCase(),{defs:d,default:(t,e,n)=>(Rt(t,e,n),Er(t,e,n),t)}),Ee=l((t,e,n)=>Xt(n),{comment:d,element:Tr,fragment:Rt,text:(t,e,n,r)=>{let o=n.nodeValue;return o&&N.test(o)&&(e.source=ct(o),e.name=null,t.push(new z(n,e,r))),t},doctype:d,document:(t,e,n)=>(Rt(t,e,n),t),default:()=>{throw new Error("Node not compileable")}}),Te=Ee;var Fs=window.DEBUG===!0,Oe=Object.assign,Or=Object.values;function Nr(t){t.stop()}function at(t,e,n,r){this.children={},this.target=E(t),this.parent=n,this.path=e,this.output=r,t[x].gets.push(this)}Oe(at.prototype,{listen:function(t){if(this.children[t])return;let e=this.path?this.path+".":"";this.children[t]=new at(this.target[t],e+t,this,this.output)},unlisten:function(t){!this.children[t]||(this.children[t].stop(),delete this.children[t])},fn:function(t){let e=this.path?this.path+".":"";this.output(e+t)},stop:function(){Z(this.target[x].gets,this),Or(this.children).forEach(Nr)}});function Ne(t,e){this.children={},this.target=t,this.done=e,this.path="",this.output=n=>{this.fnEach&&this.fnEach(n)},t[x].gets.push(this)}Oe(Ne.prototype,at.prototype,{each:function(t){return this.fnEach=t,this},stop:function(){at.prototype.stop.apply(this),this.fnDone&&this.fnDone()}});function St(t){return new Ne(E(t))}var Ar=window.DEBUG===!0||window.DEBUG&&window.DEBUG.includes("literal"),Dr={aqua:"#00a8a9",green:"#d8cd17",yellow:"#eac60c",orange:"#ffa000",red:"#ff003a"},Ae=Ar?function(e,n,r="#d8cd17"){console.log("%cLiteral %c"+e+" %c"+n,"color: #81868f; font-weight: 600;","color: "+(Dr[r]||r)+"; font-weight: 300;","color: #81868f; font-weight: 300;")}:d;var Lr=window.DEBUG===!0||window.DEBUG&&window.DEBUG.includes("literal"),Cr=Object.assign,H={};function Br(t,e){return e+t}function Rr(t){t.reduce(Br,0)!==0}function Sr(t,e){return/^[a-zA-Z]/.test(e)?t:t.childNodes[e]}function Pr(t,e){return t.split(/\./).reduce(Sr,e)}function Gr(t){t.paths?t.paths.length=0:t.paths=[]}function De(t,e,n){Gr(t);let r=t.paths,o=St(e).each(s=>{if(!r.includes(s)){for(var c;(c=r[r.length-1])&&c.length<s.length&&s.startsWith(c);)--r.length;r.push(s)}}),i=t.render(e,n);return o.stop(),i}function Mr(t){let e=t.childNodes[0],n=t.childNodes[t.childNodes.length-1];if(L(e)||t.prependChild(document.createTextNode("")),L(n)){let r=/\s*$/.exec(n.nodeValue);n.nodeValue=r.input.slice(0,r.index),t.appendChild(document.createTextNode(r[0]))}else t.appendChild(document.createTextNode(""))}function Ur(t){let e=Pr(t.path,this),n=L(e)?e.parentNode:e;return new t.constructor(e,t,n)}function O(t){let e=typeof t=="string"?t:pt(t);if(H[e]){this.consts=H[e].consts,this.content=H[e].content,this.fragment=H[e].content.cloneNode(!0),this.first=this.fragment.childNodes[0],this.last=this.fragment.childNodes[this.fragment.childNodes.length-1],this.renderers=H[e].renderers.map(Ur,this.fragment),this.observables=D;return}if(t=typeof t=="string"?document.getElementById(t):t,Lr){if(!t)throw new Error('Template id="'+e+'" not found in document');if(!t.content)throw new Error('Element id="'+e+'" is not a <template> (no content fragment)');t.dataset.data!==void 0&&Ae("render","data-data attribute will be ignored","red")}Mr(t.content),this.consts=t.dataset?Object.keys(t.dataset):D,this.content=t.content,this.fragment=t.content.cloneNode(!0),this.first=this.fragment.childNodes[0],this.last=this.fragment.childNodes[this.fragment.childNodes.length-1];let n={template:e,consts:this.consts.join(", "),path:""};this.renderers=Te([],n,this.fragment,t),this.observables=D,H[e]=this}function Le(t){t.stop()}Cr(O.prototype,{render:function(t={}){let e=E(t);if(e===this.data)return this.fragment;this.data=e;let n=P(e),r=this.renderers,o=r.map(i=>De(i,n,e));return this.observables.forEach(Le),this.observables=n?r.flatMap(i=>i.paths.map(s=>M(s,e,Y(s,e)).each(c=>De(i,n,e)))):D,Promise.all(o).then(i=>(Rr(i),this.fragment))},stop:function(){this.observables.forEach(Le),this.render=d},remove:function(){let t=0,e=this.last;for(;e!==this.first;){let n=e.previousSibling;e.remove(),++t,e=n}return this.first.remove(),++t}});var iu=I('<template is="literal-template">',{construct:function(){this.instanceCount=0}},{render:{value:function(t){let e=new O(this);return++this.instanceCount,e.render(t),e.fragment}}});var kr=/^\.|^https?:\/\//;function _r(t){try{return JSON.parse(t)}catch(e){return t}}function qr(t){return kr.test(t)?C(t):_r(t)}function Hr(t,e){let n={},r=t.length;for(;r--;)n[t[r]]=e[r];return n}I("<literal-include>",{construct:function(){this.hasAttribute("src")||console.error("<literal-include> a src attribute is required",this);let t=Object.keys(this.dataset),e=Object.values(this.dataset),n=t.length?Promise.all(e.map(qr)).then(r=>Hr(t,r)):new Promise((r,o)=>{this.resolveData=r,this.rejectData=o});new Promise((r,o)=>{this.resolveSrc=r,this.rejectSrc=o}).then(r=>{if(r.render)return n.then(o=>{this.after(r.render(o)),this.remove()});this.after(r.content.cloneNode(!0)),this.remove()}).catch(r=>console.error(r,this))},connect:function(){this.resolveData&&this.resolveData({})}},{data:{attribute:function(t){if(!this.resolveData)throw console.log("BOO dont know why this is triggered multiple times",t),new Error("<literal-include> may possess either data-* attributes or a single data attribute, not both");this.resolveData(C(t))}},src:{attribute:function(t){if(!t)return this.rejectSrc('<literal-include> source src="'+t+'" is empty');let e=t.replace(/^#/,""),n=document.getElementById(e);if(!n)return this.rejectSrc("<literal-include> src template not found");this.resolveSrc(n)}}});export{X as compiled,vn as register};
